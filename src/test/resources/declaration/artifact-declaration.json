{
  "globalElements": [
    {
      "name": "query",
      "declaringExtension": "Database",
      "kind": "GLOBAL_PARAMETER",
      "customConfigurationParameters": [],
      "metadataProperties": {},
      "refName": "selectQuery",
      "value": {
  "parameters": {
    "sql": "select * from PLANET where name \u003d :name",
    "inputParameters": "#[mel:[\u0027name\u0027 : payload]]"
  },
  "typeId": "org.mule.extension.db.api.param.QueryDefinition"
}
    },
    {
      "name": "config",
      "declaringExtension": "Database",
      "kind": "CONFIG",
      "customConfigurationParameters": [],
      "metadataProperties": {},
      "parameters": [],
      "refName": "dbConfig",
      "connection": {
        "name": "derby-connection",
        "declaringExtension": "Database",
        "kind": "CONNECTION",
        "customConfigurationParameters": [],
        "metadataProperties": {},
        "parameters": [
  {
    "poolingProfile": {
      "parameters": {
        "maxPoolSize": "10"
      }
    }
  },
  {
    "connectionProperties": {
      "parameters": {
        "first": "propertyOne",
        "second": "propertyTwo"
      }
    }
  },
  {
    "database": "target/muleEmbeddedDB"
  },
  {
    "create": "true"
  }
]
      }
    },
    {
      "name": "listener-config",
      "declaringExtension": "HTTP",
      "kind": "CONFIG",
      "customConfigurationParameters": [],
      "metadataProperties": {},
      "parameters": [
  {
    "basePath": "/"
  }
],
      "refName": "httpListener",
      "connection": {
        "name": "listener-connection",
        "declaringExtension": "HTTP",
        "kind": "CONNECTION",
        "customConfigurationParameters": [],
        "metadataProperties": {},
        "parameters": [
  {
    "disableValidation": "true"
  },
  {
    "tlsContext": {
      "parameters": {
        "key-store": {
          "parameters": {
            "path": "ssltest-keystore.jks",
            "password": "changeit",
            "keyPassword": "changeit"
          }
        }
      }
    }
  },
  {
    "host": "localhost"
  },
  {
    "port": "49019"
  },
  {
    "protocol": "HTTPS"
  }
]
      }
    },
    {
      "name": "request-config",
      "declaringExtension": "HTTP",
      "kind": "CONFIG",
      "customConfigurationParameters": [],
      "metadataProperties": {},
      "parameters": [],
      "refName": "httpRequester",
      "connection": {
        "name": "request-connection",
        "declaringExtension": "HTTP",
        "kind": "CONNECTION",
        "customConfigurationParameters": [],
        "metadataProperties": {},
        "parameters": [
  {
    "host": "localhost"
  },
  {
    "port": "49020"
  },
  {
    "authentication": {
      "parameters": {
        "username": "user",
        "password": "pass"
      },
      "typeId": "org.mule.extension.http.api.request.authentication.BasicAuthentication"
    }
  },
  {
    "clientSocketProperties": {
      "parameters": {
        "connectionTimeout": "1000",
        "keepAlive": "true",
        "receiveBufferSize": "1024",
        "sendBufferSize": "1024",
        "clientTimeout": "1000",
        "linger": "1000"
      }
    }
  }
]
      }
    },
    {
      "name": "testFlow",
      "declaringExtension": "Mule Core",
      "kind": "FLOW",
      "customConfigurationParameters": [],
      "metadataProperties": {},
      "parameters": [
  {
    "initialState": "stopped"
  }
],
      "components": [
  {
    "name": "listener",
    "declaringExtension": "HTTP",
    "kind": "SOURCE",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [
  {
    "path": "testBuilder"
  },
  {
    "redeliveryPolicy": {
      "parameters": {
        "maxRedeliveryCount": "2",
        "secureHash": "true"
      }
    }
  },
  {
    "reconnectionStrategy": {
      "parameters": {
        "blocking": "true",
        "count": "1",
        "frequency": "0"
      },
      "typeId": "reconnect"
    }
  },
  {
    "response": {
      "parameters": {
        "headers": "#[{{\u0027content-type\u0027 : \u0027text/plain\u0027}}]"
      }
    }
  }
],
    "configRef": "httpListener"
  },
  {
    "name": "choice",
    "declaringExtension": "Mule Core",
    "kind": "ROUTER",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [],
    "routes": [
      {
        "name": "when",
        "declaringExtension": "Mule Core",
        "kind": "ROUTE",
        "customConfigurationParameters": [],
        "metadataProperties": {},
        "parameters": [
  {
    "expression": "#[true]"
  }
],
        "components": [
  {
    "name": "bulkInsert",
    "declaringExtension": "Database",
    "kind": "OPERATION",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [
  {
    "sql": "INSERT INTO PLANET(POSITION, NAME) VALUES (:position, :name)"
  },
  {
    "parameterTypes": [
      {
        "parameters": {
          "key": "name",
          "type": "VARCHAR"
        }
      },
      {
        "parameters": {
          "key": "position",
          "type": "INTEGER"
        }
      }
    ]
  }
]
  }
]
      },
      {
        "name": "otherwise",
        "declaringExtension": "Mule Core",
        "kind": "ROUTE",
        "customConfigurationParameters": [],
        "metadataProperties": {},
        "parameters": [],
        "components": [
  {
    "name": "logger",
    "declaringExtension": "Mule Core",
    "kind": "OPERATION",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [
  {
    "message": "#[payload]"
  }
]
  }
]
      }
    ]
  },
  {
    "name": "bulkInsert",
    "declaringExtension": "Database",
    "kind": "OPERATION",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [
  {
    "sql": "INSERT INTO PLANET(POSITION, NAME) VALUES (:position, :name)"
  },
  {
    "parameterTypes": [
      {
        "parameters": {
          "key": "name",
          "type": "VARCHAR"
        }
      },
      {
        "parameters": {
          "key": "position",
          "type": "INTEGER"
        }
      }
    ]
  }
]
  },
  {
    "name": "request",
    "declaringExtension": "HTTP",
    "kind": "OPERATION",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [
  {
    "path": "/nested"
  },
  {
    "method": "POST"
  }
],
    "configRef": "httpRequester"
  },
  {
    "name": "insert",
    "declaringExtension": "Database",
    "kind": "OPERATION",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [
  {
    "sql": "INSERT INTO PLANET(POSITION, NAME, DESCRIPTION) VALUES (777, \u0027Pluto\u0027, :description)"
  },
  {
    "parameterTypes": [
      {
        "parameters": {
          "key": "description",
          "type": "CLOB"
        }
      }
    ]
  },
  {
    "inputParameters": "#[{{\u0027description\u0027 : payload}}]"
  }
],
    "configRef": "dbConfig"
  },
  {
    "name": "sendAndReceive",
    "declaringExtension": "Sockets",
    "kind": "OPERATION",
    "customConfigurationParameters": [],
    "metadataProperties": {},
    "parameters": [
  {
    "target": "myVar"
  },
  {
    "streamingStrategy": {
      "parameters": {
        "bufferSizeIncrement": "8",
        "bufferUnit": "KB",
        "initialBufferSize": "51",
        "maxInMemorySize": "1000"
      },
      "typeId": "repeatable-in-memory-stream"
    }
  }
]
  }
]
    }
  ],
  "customParameters": [],
  "properties": {}
}
